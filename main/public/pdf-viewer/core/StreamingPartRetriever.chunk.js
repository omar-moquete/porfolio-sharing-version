/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[14],{439:function(Aa,ua,r){r.r(ua);var pa=r(1),ka=r(0);r.n(ka);var ma=r(2),ha=r(146);Aa=r(52);var da=r(94),aa=r(245),x=r(70),y=r(244);r=r(373);var f=window,b=function(){function h(n,z,w){var ea=-1===n.indexOf("?")?"?":"&";switch(z){case x.a.NEVER_CACHE:this.url=n+ea+"_="+Object(ka.uniqueId)();break;default:this.url=n}this.$e=w;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);this.request.setRequestHeader("X-Requested-With",
"XMLHttpRequest");this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=y.a.NOT_STARTED}h.prototype.start=function(n,z){var w=this,ea=this,ja=this.request,ca;ea.Lw=0;n&&Object.keys(n).forEach(function(ba){w.request.setRequestHeader(ba,n[ba])});z&&(this.request.withCredentials=z);this.FD=setInterval(function(){var ba=0===window.document.URL.indexOf("file:///");ba=200===ja.status||
ba&&0===ja.status;if(ja.readyState!==y.b.DONE||ba){try{ja.responseText}catch(fa){return}ea.Lw<ja.responseText.length&&(ca=ea.Gfa())&&ea.trigger(h.Events.DATA,[ca]);0===ja.readyState&&(clearInterval(ea.FD),ea.trigger(h.Events.DONE))}else clearInterval(ea.FD),ea.trigger(h.Events.DONE,["Error received return status "+ja.status])},1E3);this.request.send(null);this.status=y.a.STARTED};h.prototype.Gfa=function(){var n=this.request,z=n.responseText;if(0!==z.length)if(this.Lw===z.length)clearInterval(this.FD),
this.trigger(h.Events.DONE);else return z=Math.min(this.Lw+3E6,z.length),n=f.$S(n,this.Lw,!0,z),this.Lw=z,n};h.prototype.abort=function(){clearInterval(this.FD);var n=this;this.request.onreadystatechange=function(){Object(ma.j)("StreamingRequest aborted");n.status=y.a.ABORTED;return n.trigger(h.Events.ABORTED)};this.request.abort()};h.prototype.finish=function(){var n=this;this.request.onreadystatechange=function(){n.status=y.a.SUCCESS;return n.trigger(h.Events.DONE)};this.request.abort()};h.Events=
{DONE:"done",DATA:"data",ABORTED:"aborted"};return h}();Object(Aa.a)(b);var a;(function(h){h[h.LOCAL_HEADER=0]="LOCAL_HEADER";h[h.FILE=1]="FILE";h[h.CENTRAL_DIR=2]="CENTRAL_DIR"})(a||(a={}));var e=function(h){function n(){var z=h.call(this)||this;z.buffer="";z.state=a.LOCAL_HEADER;z.dM=4;z.Il=null;z.Xs=ha.c;z.ln={};return z}Object(pa.c)(n,h);n.prototype.zfa=function(z){var w;for(z=this.buffer+z;z.length>=this.Xs;)switch(this.state){case a.LOCAL_HEADER:this.Il=w=this.Kfa(z.slice(0,this.Xs));if(w.Ft!==
ha.g)throw Error("Wrong signature in local header: "+w.Ft);z=z.slice(this.Xs);this.state=a.FILE;this.Xs=w.TG+w.gq+w.Nv+this.dM;this.trigger(n.Events.HEADER,[w]);break;case a.FILE:this.Il.name=z.slice(0,this.Il.gq);this.ln[this.Il.name]=this.Il;w=this.Xs-this.dM;var ea=z.slice(this.Il.gq+this.Il.Nv,w);this.trigger(n.Events.FILE,[this.Il.name,ea,this.Il.iH]);z=z.slice(w);if(z.slice(0,this.dM)===ha.h)this.state=a.LOCAL_HEADER,this.Xs=ha.c;else return this.state=a.CENTRAL_DIR,!0}this.buffer=z;return!1};
n.Events={HEADER:"header",FILE:"file"};return n}(aa.a);Object(Aa.a)(e);Aa=function(h){function n(z,w,ea,ja,ca){ea=h.call(this,z,ea,ja)||this;ea.url=z;ea.stream=new b(z,w);ea.Wd=new e;ea.ZV=window.createPromiseCapability();ea.zW={};ea.$e=ca;return ea}Object(pa.c)(n,h);n.prototype.Ex=function(z){var w=this;this.request([this.fj,this.Bk,this.ej]);this.stream.addEventListener(b.Events.DATA,function(ea){try{if(w.Wd.zfa(ea))return w.stream.finish()}catch(ja){throw w.stream.abort(),w.Jv(ja),z(ja),ja;}});
this.stream.addEventListener(b.Events.DONE,function(ea){w.dfa=!0;w.ZV.resolve();ea&&(w.Jv(ea),z(ea))});this.Wd.addEventListener(e.Events.HEADER,Object(ka.bind)(this.yW,this));this.Wd.addEventListener(e.Events.FILE,Object(ka.bind)(this.$fa,this));return this.stream.start(this.$e,this.withCredentials)};n.prototype.XS=function(z){var w=this;this.ZV.promise.then(function(){z(Object.keys(w.Wd.ln))})};n.prototype.Xn=function(){return!0};n.prototype.request=function(z){var w=this;this.dfa&&z.forEach(function(ea){w.zW[ea]||
w.Eka(ea)})};n.prototype.yW=function(){};n.prototype.abort=function(){this.stream&&this.stream.abort()};n.prototype.Eka=function(z){this.trigger(da.a.Events.PART_READY,[{Ya:z,error:"Requested part not found",ti:!1,Rf:!1}])};n.prototype.$fa=function(z,w,ea){this.zW[z]=!0;this.trigger(da.a.Events.PART_READY,[{Ya:z,data:w,ti:!1,Rf:!1,error:null,Xc:ea}])};return n}(da.a);Object(r.a)(Aa);Object(r.b)(Aa);ua["default"]=Aa}}]);}).call(this || window)
